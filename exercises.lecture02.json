{"version":2,"kind":"Article","sha256":"a58ccc20a6e864fbe68ce5a83c989d40fcf68861e971900005d2bc5d1b152987","slug":"exercises.lecture02","location":"/exercises/lecture02.md","dependencies":[],"frontmatter":{"title":"Lecture 2 Exercises — SSH & Slurm Practice (1-week workload)","content_includes_title":false,"authors":[{"id":"LH","nameParsed":{"literal":"Luca Heltai","given":"Luca","family":"Heltai"},"name":"Luca Heltai","orcid":"0000-0001-5514-4683","email":"luca.heltai@unipi.it","affiliations":["unipi"],"github":"luca-heltai","linkedin":"https://www.linkedin.com/in/heltai/","youtube":"UCK0glvtKYmVPJbpurdlt9pw","corresponding":true}],"github":"https://github.com/luca-heltai/sspa","copyright":"2025","affiliations":[{"id":"unipi","name":"University of Pisa","department":"Department of Mathematics","address":"Largo Bruno Pontecorvo 5, 56127 Pisa, Italy","city":"Pisa","postal_code":"56127","country":"Italy","ror":"https://ror.org/03ad39j10","phone":"+39 050 221 3824"}],"numbering":{"title":{"offset":1}},"source_url":"https://github.com/luca-heltai/sspa/blob/main/jupyterbook/exercises/lecture02.md","edit_url":"https://github.com/luca-heltai/sspa/edit/main/jupyterbook/exercises/lecture02.md","exports":[{"format":"md","filename":"lecture02.md","url":"/sspa//build/lecture02-6b622825af97b223f2b975dea116a4fb.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Objective: practice secure access patterns and Slurm job engineering inside the Docker cluster. Deliver a short lab notebook (Markdown) with command transcripts, screenshots, and timing tables. Keep code under ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"OvG3OjkK7s"},{"type":"inlineCode","value":"codes/lab02/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"tX4wNSogyR"},{"type":"text","value":" unless otherwise noted.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Jqwe42sX52"}],"key":"gijGhjeRPm"},{"type":"heading","depth":2,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Exercise 1 — Hardened SSH workflow","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"z7F3VaTxId"}],"identifier":"exercise-1-hardened-ssh-workflow","label":"Exercise 1 — Hardened SSH workflow","html_id":"exercise-1-hardened-ssh-workflow","implicit":true,"key":"uGcKS9uKmi"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":7,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Generate two SSH key pairs: one Ed25519 for personal logins, one RSA limited to Git interactions. Store them under ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"YdRJQSgL3u"},{"type":"inlineCode","value":"~/.ssh/keys/lecture02/","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"rQu4N1gVh9"},{"type":"text","value":" with descriptive names.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"CfF4wohLOw"}],"key":"lecijM0WKO"}],"key":"Rxq95TfuPu"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Create a multi-host SSH config:","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"zAlf5tJMdt"}],"key":"HlEthZbT9z"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"sspa-controller","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"Qke5oJD3W0"},{"type":"text","value":" (localhost:2222) using the Ed25519 key.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"Qv4P6n6e62"}],"key":"HsWFAYnDCb"}],"key":"f1ENnQC8if"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"sspa-worker1","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"GLW2BmJblR"},{"type":"text","value":" reachable via ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"Ca0188J7jw"},{"type":"inlineCode","value":"ProxyJump sspa-controller","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"VfUmupLihB"},{"type":"text","value":".","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"QkXTkQOMvX"}],"key":"dbEjAi8aDv"}],"key":"YVNoJMNwRE"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"A fake campus cluster entry that demonstrates ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"lT0ZsRV1PO"},{"type":"inlineCode","value":"ProxyJump","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"sAskRhCGmp"},{"type":"text","value":" chaining plus a local port forward example.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"gHTwEC9Y1E"}],"key":"gxs0AoB9j3"}],"key":"HPZgWR2tkc"}],"key":"CrpPsNbExo"}],"key":"e5zEuAgz1n"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Set up local and remote SSH agents (","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"ghmqb6xOzX"},{"type":"inlineCode","value":"ssh-agent","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"GvGKVOeumw"},{"type":"text","value":" + ","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"KdqIkDd7mi"},{"type":"inlineCode","value":"ssh-add","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"nI0w39ADHC"},{"type":"text","value":"). Document how you forwarded the agent through the controller to worker1 (","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"Z2Mzs7t3cH"},{"type":"inlineCode","value":"ssh -A","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"TIYqxpSVNV"},{"type":"text","value":").","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"s2wxwUSvqJ"}],"key":"gNUKcS67Wg"}],"key":"qHzHKdMDmW"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Provide a troubleshooting section: how to rotate host keys, what to do when permissions are wrong, and how to test tunnels with ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"Faq4lC0wBE"},{"type":"inlineCode","value":"nc","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"hSdM3A1g05"},{"type":"text","value":" or ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"hHFoC4Bsob"},{"type":"inlineCode","value":"curl","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"blsnlw1Dk3"},{"type":"text","value":".","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"yTrCwW7CeK"}],"key":"JQWV6FOXoo"}],"key":"PGGFa3Fs8p"}],"key":"oKumE0JuOJ"},{"type":"heading","depth":2,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Exercise 2 — Job arrays & dependencies","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"JHmB3agauk"}],"identifier":"exercise-2-job-arrays-dependencies","label":"Exercise 2 — Job arrays & dependencies","html_id":"exercise-2-job-arrays-dependencies","implicit":true,"key":"sv8Ufq5acH"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":17,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Extend the provided ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"LTWrRxtAwh"},{"type":"inlineCode","value":"vec_add_array.sbatch","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"Vm1YdWtzqK"},{"type":"text","value":" to cover ntasks ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"cJuAMANn1o"},{"type":"inlineCode","value":"{1,2,4}","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"OTJjWl7wEq"},{"type":"text","value":" and capture results into ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"NyDAOtL5J5"},{"type":"inlineCode","value":"$WORK/results/vec_add_ntasks-<n>.txt","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"eqSjuhTGur"},{"type":"text","value":".","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"jWUIP8RoFo"}],"key":"mk6Y7AgZ22"}],"key":"YZ3daNRFh8"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Modify ","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"WsDdRVDh4o"},{"type":"inlineCode","value":"montecarlo_array.sbatch","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"OIG8Cm2Lgv"},{"type":"text","value":" so that each array task writes metadata into ","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"g3UMTT4wUZ"},{"type":"inlineCode","value":"$SCRATCH/montecarlo/meta/<jobid>_<taskid>.json","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"d9NpM7R2v0"},{"type":"text","value":" alongside the ","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"urD3OY4BUa"},{"type":"inlineCode","value":".npz","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"ltZiTUAvKi"},{"type":"text","value":" file.","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"hhjABhZOXC"}],"key":"fKTkKQDo5f"}],"key":"sLEMAnItYH"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Write a new cleanup job ","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"b9wTlR0gy1"},{"type":"inlineCode","value":"cleanup.sh","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"kjVY0dvJYJ"},{"type":"text","value":" that deletes scratch artifacts older than 2 days (use ","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"MlqZSjla4Z"},{"type":"inlineCode","value":"find -mtime +2","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"b4Y816HyCC"},{"type":"text","value":"). Chain it with ","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"L6e6SeYW8B"},{"type":"inlineCode","value":"--dependency=afterany:<aggregate_jobid>","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"BkR3hR87tt"},{"type":"text","value":".","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"ASLfqIG5Zl"}],"key":"Fi9tWmyBgz"}],"key":"lJdZt38NXL"},{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep an experiment log summarizing queue wait time, run time, and resource requests. Include at least one ","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"hfWT6kZBsy"},{"type":"inlineCode","value":"scontrol show job","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"iAydnm138S"},{"type":"text","value":" output annotated to explain key fields.","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"B07KlpPVG8"}],"key":"pR8lXHLZP5"}],"key":"lFfe3QGsyb"}],"key":"anaFGFVRRB"},{"type":"heading","depth":2,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Exercise 3 — Interactive debugging workflow","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"OURu8JhwGY"}],"identifier":"exercise-3-interactive-debugging-workflow","label":"Exercise 3 — Interactive debugging workflow","html_id":"exercise-3-interactive-debugging-workflow","implicit":true,"key":"KIOu8OHqWD"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":24,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Request an interactive allocation (","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"kWJeAcv4ew"},{"type":"inlineCode","value":"salloc --nodes=1 --time=00:20:00","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"sGoUfphMYr"},{"type":"text","value":") and within it:","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"i6axB3fgo0"}],"key":"Qh9FHHZi0v"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":25,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Launch ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"voKs0gOT1s"},{"type":"inlineCode","value":"htop","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"bpauZdUFAa"},{"type":"text","value":" or ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"neMAmFOiez"},{"type":"inlineCode","value":"top","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"IPrylJko4Y"},{"type":"text","value":" to observe CPU usage.","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"t4lxAZviTo"}],"key":"ZxuSQcvg7X"}],"key":"yN8CAoKoHq"},{"type":"listItem","spread":true,"position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Run ","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"cgWcGI1rQQ"},{"type":"inlineCode","value":"srun --pty bash","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"pE8lRZXY0h"},{"type":"text","value":" on worker1 and verify ","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"iL4gfWHKTE"},{"type":"inlineCode","value":"$SLURM_JOB_ID","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"bWZqAFHuEq"},{"type":"text","value":" remains the same.","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"IvVEFiB9Sv"}],"key":"mD3eBeeT5C"}],"key":"jyr0j97xrG"}],"key":"gRFc1jmJ2I"}],"key":"Ehwj2gleuc"},{"type":"listItem","spread":true,"position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Demonstrate live code editing: modify ","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"uKDOFe9wTF"},{"type":"inlineCode","value":"montecarlo.py","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"Yy3dVnCIiX"},{"type":"text","value":" to print progress every 5 seconds, run it interactively, then revert the change.","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"dOEVWWnzgX"}],"key":"nYAS3QvaVa"}],"key":"QxC2AbvPTD"},{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Capture the commands required to forward a Jupyter notebook from worker1 back to your laptop using SSH tunnels (","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"U2VHGZGRGD"},{"type":"inlineCode","value":"ssh -L","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"f2rB71uEeR"},{"type":"text","value":"). Explain how you would adapt the ports when bridging through the controller.","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"ON2kREy6Hh"}],"key":"wRFjZOrd1B"}],"key":"M7re3IcqPN"}],"key":"H4CZxvpolW"},{"type":"heading","depth":2,"position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"Submission checklist","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"Skt1PtaFzS"}],"identifier":"submission-checklist","label":"Submission checklist","html_id":"submission-checklist","implicit":true,"key":"Bg9Ihf8CG5"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":32,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Provide SLURM job IDs, command transcripts, and relevant log snippets.","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"xTuZ1gChxX"}],"key":"useSA5R26m"}],"key":"NQu7flY5GU"},{"type":"listItem","spread":true,"position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Include any helper scripts you wrote (cleanup, metadata writer, etc.).","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"wawm3qKmwV"}],"key":"XigcY08h6d"}],"key":"Bq4k5Jd6Oj"},{"type":"listItem","spread":true,"position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Note open issues or unanswered questions you encountered; these feed future lectures.","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"zTBgmdPXz2"}],"key":"uRIKnmzykt"}],"key":"oCycXv4oDv"}],"key":"mE1YkYDix8"}],"key":"PVV3KO9o3T"}],"key":"ROzaraPC8C"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Lecture 1 Exercises — Command Line Foundations (1-week workload)","url":"/exercises/lecture01","group":"Exercises"},"next":{"title":"Lecture 3 Exercises — Git Fundamentals (1-week workload)","url":"/exercises/lecture03","group":"Exercises"}}},"domain":"http://localhost:3000"}